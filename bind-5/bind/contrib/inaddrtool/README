Dear all,

After many requests I have published my inaddr-arpa checking tool. We use
it now at RIPE quite some time and it really saves us a lot of time,
although the program is not perfect and still needs some polishing.

Beware of changing/adapting the tool too much since I expect to make some
big changes in the output format to facilitate further automatic
processing. Furthermore, I want to split it in some smaller files and a
config file for better maintainability. Of course comments and bug
reports are welcome. Please check the most recent version that always is
available at our ftp server before submitting a bug report.

Kind regards,

David Kessens
RIPE NCC
--------


README for the inaddrtool

Date: 950815

Author: David Kessens, RIPE NCC 



NOTE:

THE TOOL HAS BEEN MADE PUBLICLY AVAILABLE BECAUSE OF THE LARGE NUMBER OF
REQUESTS OF OUR CUSTOMERS TO DO SO. THE TOOL ITSELF HAS PROVEN IT'S
USEFULNESS, BUT NOTE THE FACT THAT I EXPECT TO MAKE SOME BIG CHANGES
BEFORE RELEASING A FINAL 950815. ALSO SOME ADD-ON PROGRAMS THAT WILL
MAKE IT POSSIBLE TO ADD THE REVERSE DELEGATION CHANGES/REQUESTS
AUTOMATICALLY TO (Y)OUR ZONEFILES ARE STILL MISSING. THE PROGRAM IS
DESIGNED AS SITE INDEPENT AS POSSIBLE.

PLEASE USE THE NORMAL PROCEDURE AS DESCRIBED IN RIPE-105 IF YOU WANT TO
DO A REVERSE DELEGATION REQUEST FOR A REVERSE DOMAIN MANAGED BY THE RIPE
NCC, BUT SEND YOUR REQUEST TO <AUTO-INADDR@RIPE.NET> INSTEAD OF
<HOSTMASTER@RIPE.NET>



Reverse delegation tool (Alpha version!)
----------------------------------------


As of today the RIPE NCC offers an automated method for the submission of
reverse zone delegations in 193.in-addr.arpa and 194.in-addr.arpa. The
reverse delegation requests and the zone files on all nameservers will be
checked automatically. The diagnostics generated by these checks will be
returned to you automatically too. This will make you aware of any
problems very quickly, so that you can correct them and re-submit your
request. The most recent version of the tool is publicly available at:

ftp://ftp.ripe.net/tools/inaddrtool-$DATE.tar.gz

The tool uses some other external programs for gathering the information
it needs for checking your zone files:

ftp://ftp.ripe.net/tools/ping.tar.Z 
ftp://ftp.ripe.net/tools/dns/host.tar.Z
ftp://ftp.ripe.net/pride/tools/prtraceroute-2.0beta3.shar.gz


Installing the software:

- uncompress/unzip and untar the tool and the external programs

- edit the variables in the source code (if needed):

  $TESTMODE=1 for testing, 0 for normal use
  
  $UPDLOGDIR="Directory for logging the incoming requests";
  $ACKLOGDIR="Directory for logging the outgoing acknowledgements";
  $FWLOGDIR="Directory for logging the outgoing approved requests";
  $MSGQUEUEDIR="Directory for temporarily storing the requests"; 

  $NSNAME="The name of your nameserver";

  $NAMESERVERCHECK=;  see for details the source code
  $MAILCMD=;          see for details the source code
  $NICECMD="Your nice program if you want" else use ""; 
    
  $HUMANMAIL="The E-mail address of the human processing the approved requests
              and answering questions. When $TESTMODE=1, all mail will be
              send to this address";
  
  $AUTOMAIL="The E-mail address of the mail box that will auto process
             incoming requests";            

- Put something like:

  "|/home/user/bin/inaddrtool 2>/dev/null"
  
  in the .forward file of user $AUTOMAIL
  
  Note: there is *NO* queuing mechanism yet, so beware of overloading
  your machine with a large number of requests. 


The input:

The tool expects to read an E-mail message from standard input although
there is no problem when using it stand-alone. The E-mail message should
contain a valid RIPE database object as described in the ripe-105
(ftp://ftp.ripe.net/ripe/docs/ripe-105) procedure.

When the automated procedure does not detect any errors, the request is
forwarded to the $HUMANMAIL role account person for some additional manual
checks and the processing of the delegation itself. An acknowledgement of
this fact is also sent to the people mentioned in the From:/Reply-To: and
Cc: field in the E-mail message. The tool will return an error report if
errors are found. If $TESTMODE=1 all mail will be send to $HUMANMAIL.

You can use some keywords in the 'Subject:' line of your E-mail to
control the checking process. The use of the LONGACK keyword is very
recommended.

HELP    - will send you a (patched) ripe-105 document
CHANGE  - is needed if you want to change an existing reverse delegation 
LONGACK - will give you the most verbose output as possible
TEST    - do the checks, but sent only a report back to the user even if
          no errors are found

You also might want to use the special variable NSNAME that's documented
in the source code itself (for experts only). 

RIPE document ripe-105 requires you to send in a RIPE database 'inetnum'
object with a 'rev-srv' attribute for each nameserver for single/multiple
C's reverse delegation requests and for whole blocks 'domain' objects
with 'nserver' attributes for each nameserver.

I am neither a DNS expert or native English writer ;-) so all your
comments are welcome! Please send them together with complaints, bug
reports or special requests to <inaddr@ripe.net>.






