<!doctype html public "-//IETF//DTD HTML 2.0//EN">
<!-- $Id: runmdn.html,v 1.1.1.1 2001/01/31 03:58:55 zarzycki Exp $ -->
<html>

<head>
<title>runmdn</title>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
</head>

<body>
<h1>runmdn</h1>

<ul>
<li><a href="#overview">概要</a>
<li><a href="#setup">設定</a>
<li><a href="#usage">使用法</a>
<li><a href="#limitation">制限事項</a>
</ul>

<hr>
<h2><a name="overview">概要</a></h2>

<p><b>runmdn</b> は bind4 あるいは bind8 をベースとした
リゾルバライブラリを持つ Unix クライアントを、
再コンパイルなしに多言語ドメイン名を扱えるようにするためのコマンドです。
具体的には、名前解決用の API (例えば <em>gethostbyname</em>) が
アプリケーションのローカルエンコーディング (EUC-JP 等) で表現された
ホスト名を受け付けるようになります。またこれらの API が多言語ホスト名を
ローカルエンコーディングで返すようになります。

<p><b>runmdn</b> を使用してクライアントが多言語ドメイン名を扱えるように
する方法は、mDNkit が提供する方法の中で最も手間がかからず簡単なものですが、
システムによっては使用できなかったり、コマンドによっては効果がなかったり
します。これらの制限に関しては<a href="#limitation">制限事項</a>の項を
ご覧ください。

<p>

<hr>
<h2><a name="setup">設定</a></h2>

<p>runmdn を使用するには、mDNkit のクライアント共通設定ファイル
で使用するエンコーディングや正規化の方法を設定しておく必要があります。
このファイルの設定方法については
<a href="resolvconfig.html">mDNkit リゾルバのコンフィギュレーション</a>を
ご覧ください。

<p>また、runmdn はアプリケーションのローカルエンコーディングを自動的に
推測しますが、推測に失敗する場合もあります。そのような場合の対処方法は
<a href="resolvconfig.html#local-encoding">ローカルエンコーディングについて</a>をご覧ください。

<p>

<hr>
<h2><a name="usage">使用法</a></h2>

<p>runmdn の使い方は極めて簡単で、アプリケーションの起動コマンドの
先頭にコマンド名 <tt>runmdn</tt> をつけるだけです。

<blockquote>
<pre>
% runmdn <i>コマンド</i> [<i>引数...</i>]
</pre>
</blockquote>

<p>例えば <tt>telnet</tt> コマンドを使用してホスト「私の会社.jp」に
接続するには次のようにします。

<blockquote>
<pre>
% runmdn telnet 私の会社.jp
</pre>
</blockquote>

<hr>
<h2><a name="limitation">制限事項</a></h2>

<p>runmdn は、mDNkit が提供している方法の中で最も手軽にクライアントが
多言語ドメインを扱えるようにするものですが、どのようなクライアントにも
適用できるわけではありません。

<p>runmdn はシステムの持つ共有ライブラリの動的リンク機構
(ライブラリのプリロード機能) を利用し、
クライアントアプリケーションの実行時に、アプリケーションにリンクされている
リゾルバライブラリの一部の関数を多言語ドメイン名を扱う機能を持たせた
バージョンのものと置き換えてしまうことによって多言語ドメイン名の処理を
実現します。置き換える関数は bind4 および bind8 をベースとするリゾルバ
が内部で使用している関数です。

<p>したがって runmdn が動作するには次のようないくつかの制限があります。
<ol>
<li>共有ライブラリの動的リンク機構を用いているので、
  共有ライブラリが使用できるシステムでなければなりません
<li>環境変数 <var>LD_PRELOAD</var> または類似の機構による
  ライブラリのプリロード機能を持つシステムでなければなりません
<li>runmdn の対象となるコマンドはリゾルバライブラリをスタティックリンク
  していてはなりません
<li>システムのライブラリが <em>iconv()</em> 関数を提供していない場合、外部の
  ライブラリを用いることになりますが、そのライブラリも共有ライブラリで
  なければなりません。
<li>システムのリゾルバライブラリは bind4 あるいは bind8 ベースのものでなければ
  なりません。
<li>セキュリティ上の理由から一般に setuid されたコマンドはプリロード機能が
  使えないようになっているので、setuid されたコマンドであってはなりません。
</ol>

<p>これらの制限により runmdn が使用できない場合は、mDNkit が提供する他の
方法 (<em>dnsproxy</em> や <em>bind9 パッチ</em> など) をご利用ください。

</body>
</html>
